{% extends "base.html" %}
{% load breakpoint %}
{% block content %}
  <div class="p-10 shadow-lg bg-white">
    <h1 class="text-4xl font-bold mb-5">New Book</h1>
    <form action="" method="post" enctype="multipart/form-data">
      <div class="space-y-4">
        {% csrf_token %}
        {% if form.errors %}
          <div class="text-red-500 bg-red-100 p-4 rounded-lg">
            <h3 class="font-semibold">Errors:</h3>
            <ul class="list-disc pl-5 mt-2">
              {% for field, errors in form.errors.items %}
                {% for error in errors %}<li>{{ field|capfirst }}: {{ error }}</li>{% endfor %}
              {% endfor %}
            </ul>
          </div>
        {% endif %}
        <label class="block mb-2 text-lg font-medium text-gray-900" for="title">Title</label>
        <input type="text"
               name="title"
               id="title"
               class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
               value="{{ form.title.value|default:'' }}" />
      </div>
      <div>
        <label class="block mb-2 text-lg font-medium text-gray-900" for="author">Author</label>
        <select class="bg-gray-50 border cursor-pointer border-gray-300 w-full rounded-lg text-sm focus:ring-sky-500 focus:border-sky-500 p-2.5"
                name="author"
                id="author">
          <option class="text-gray-400" value="">Select Author</option>
          {% for author in authors %}
            <option value="{{ author.id }}"
                    {% if form.instance and form.instance.author.id == author.id %}selected{% endif %}>
              {{ author.name }}
            </option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label class="block mb-2 text-lg font-medium text-gray-900"
               for="description">Description</label>
        <textarea class="w-full rounded-lg bg-gray-50 border border-gray-300 text-sm focus:ring-blue-500 focus:border-blue-500 p-2.5"
                  name="description"
                  id="description"
                  cols="30"
                  rows="10">{{ form.description.value|default:'' }}</textarea>
      </div>
      <div>
        <label class="block mb-2 text-lg font-medium text-gray-900"
               for="published_date">Published Date</label>
        <input type="date"
               name="published_date"
               id="published_date"
               class="w-full rounded-lg bg-gray-50 cursor-pointer border border-gray-300 text-sm focus:ring-blue-500 focus:border-blue-500 p-2.5"
               value="{{ form.published_date.value|date:'Y-m-d'|default:'' }}" />
      </div>
      <div>
        <label class="block mb-2 text-lg font-medium text-gray-900"
               for="cover_image">Cover Image</label>
        <input class="w-full block text-lg cursor-pointer rounded-lg text-gray-900 bg-gray-50 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 focus:outline-none file:mr-3 file:ms-0 file:border-none file:p-4 file:cursor-pointer"
               type="file"
               name="cover_image"
               id="cover_image" />
      </div>
      <div class="mt-5 flex justify-between">
        <input class="block px-3 py-2 bg-blue-500 text-sm rounded-lg box-border text-white"
               type="submit"
               value="Submit" />
        <a class="block px-5 py-2 text-md bg-gray-400 rounded-lg text-sm box-border text-white"
           href="{% url 'index' %}">Back</a>
      </div>
    </div>
  </form>
{% endblock content %}
