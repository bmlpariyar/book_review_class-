<h2>Reviews</h2>
{% for review in reviews %}
<p>{{ review.user.username }}</p>
<p>{{ review.rating }}</p>
<p>{{ review.review_text }}</p>
<p>{{ review.created_at|date:"Y-m-d H:i" }}</p>
{% include "reviews/edit_review.html" %}
{% if user.is_authenticated and review.user == user %}
<div>
  <button class="edit-button" onclick="editReview({{ review.id }})">
    Edit
  </button>
  <button><a href="{% url 'delete_review' review.id %}">Delete</a></button>
</div>
{% endif%}
<hr />
{% empty %}
<p>No reviews yet. Be the first to review!</p>
{% endfor %}

<script>
  function editReview(reviewId) {
    document.querySelectorAll(".edit-form").forEach(function (form) {
      form.style.display = "none";
    });
    const form = document.getElementById("edit-form-" + reviewId);
    form.style.display = form.style.display === "none" || form.style.display === "" ? "block" : "none";
  }
</script>
